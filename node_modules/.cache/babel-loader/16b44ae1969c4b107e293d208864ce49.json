{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function (d, b) {\n  for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n\nvar Observable_1 = require('../Observable');\n\nvar subscribeToResult_1 = require('../util/subscribeToResult');\n\nvar OuterSubscriber_1 = require('../OuterSubscriber');\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\n\n\nvar IfObservable = function (_super) {\n  __extends(IfObservable, _super);\n\n  function IfObservable(condition, thenSource, elseSource) {\n    _super.call(this);\n\n    this.condition = condition;\n    this.thenSource = thenSource;\n    this.elseSource = elseSource;\n  }\n\n  IfObservable.create = function (condition, thenSource, elseSource) {\n    return new IfObservable(condition, thenSource, elseSource);\n  };\n  /** @deprecated internal use only */\n\n\n  IfObservable.prototype._subscribe = function (subscriber) {\n    var _a = this,\n        condition = _a.condition,\n        thenSource = _a.thenSource,\n        elseSource = _a.elseSource;\n\n    return new IfSubscriber(subscriber, condition, thenSource, elseSource);\n  };\n\n  return IfObservable;\n}(Observable_1.Observable);\n\nexports.IfObservable = IfObservable;\n\nvar IfSubscriber = function (_super) {\n  __extends(IfSubscriber, _super);\n\n  function IfSubscriber(destination, condition, thenSource, elseSource) {\n    _super.call(this, destination);\n\n    this.condition = condition;\n    this.thenSource = thenSource;\n    this.elseSource = elseSource;\n    this.tryIf();\n  }\n\n  IfSubscriber.prototype.tryIf = function () {\n    var _a = this,\n        condition = _a.condition,\n        thenSource = _a.thenSource,\n        elseSource = _a.elseSource;\n\n    var result;\n\n    try {\n      result = condition();\n      var source = result ? thenSource : elseSource;\n\n      if (source) {\n        this.add(subscribeToResult_1.subscribeToResult(this, source));\n      } else {\n        this._complete();\n      }\n    } catch (err) {\n      this._error(err);\n    }\n  };\n\n  return IfSubscriber;\n}(OuterSubscriber_1.OuterSubscriber);","map":{"version":3,"sources":["../../src/observable/IfObservable.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,IAAA,YAAA,GAAA,OAAA,CAAkD,eAAlD,CAAA;;AAIA,IAAA,mBAAA,GAAA,OAAA,CAAkC,2BAAlC,CAAA;;AACA,IAAA,iBAAA,GAAA,OAAA,CAAgC,oBAAhC,CAAA;AACA;;;;;;;AAKA,IAAA,YAAA,GAAA,UAAA,MAAA,EAAA;AAAwC,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;;AAQtC,WAAA,YAAA,CAAoB,SAApB,EACoB,UADpB,EAEoB,UAFpB,EAEgE;AAC9D,IAAA,MAAA,CAAA,IAAA,CAAA,IAAA;;AAHkB,SAAA,SAAA,GAAA,SAAA;AACA,SAAA,UAAA,GAAA,UAAA;AACA,SAAA,UAAA,GAAA,UAAA;AAEnB;;AAVM,EAAA,YAAA,CAAA,MAAA,GAAP,UAAoB,SAApB,EACoB,UADpB,EAEoB,UAFpB,EAEgE;AAC9D,WAAO,IAAI,YAAJ,CAAiB,SAAjB,EAA4B,UAA5B,EAAwC,UAAxC,CAAP;AACD,GAJM;AAYP;;;AAAqC,EAAA,YAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,UAAX,EAAsC;AACzE,QAAA,EAAA,GAAA,IAAA;AAAA,QAAQ,SAAA,GAAA,EAAA,CAAA,SAAR;AAAA,QAAmB,UAAA,GAAA,EAAA,CAAA,UAAnB;AAAA,QAA+B,UAAA,GAAA,EAAA,CAAA,UAA/B;;AAEA,WAAO,IAAI,YAAJ,CAAiB,UAAjB,EAA6B,SAA7B,EAAwC,UAAxC,EAAoD,UAApD,CAAP;AACD,GAJoC;;AAKvC,SAAA,YAAA;AAAC,CAnBD,CAAwC,YAAA,CAAA,UAAxC,CAAA;;AAAa,OAAA,CAAA,YAAA,GAAY,YAAZ;;AAqBb,IAAA,YAAA,GAAA,UAAA,MAAA,EAAA;AAAiC,EAAA,SAAA,CAAA,YAAA,EAAA,MAAA,CAAA;;AAC/B,WAAA,YAAA,CAAY,WAAZ,EACoB,SADpB,EAEoB,UAFpB,EAGoB,UAHpB,EAGgE;AAC9D,IAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,WAAN;;AAHkB,SAAA,SAAA,GAAA,SAAA;AACA,SAAA,UAAA,GAAA,UAAA;AACA,SAAA,UAAA,GAAA,UAAA;AAElB,SAAK,KAAL;AACD;;AAEO,EAAA,YAAA,CAAA,SAAA,CAAA,KAAA,GAAR,YAAA;AACE,QAAA,EAAA,GAAA,IAAA;AAAA,QAAQ,SAAA,GAAA,EAAA,CAAA,SAAR;AAAA,QAAmB,UAAA,GAAA,EAAA,CAAA,UAAnB;AAAA,QAA+B,UAAA,GAAA,EAAA,CAAA,UAA/B;;AAEA,QAAI,MAAJ;;AACA,QAAI;AACF,MAAA,MAAM,GAAY,SAAS,EAA3B;AACA,UAAM,MAAM,GAAG,MAAM,GAAG,UAAH,GAAgB,UAArC;;AAEA,UAAI,MAAJ,EAAY;AACV,aAAK,GAAL,CAAS,mBAAA,CAAA,iBAAA,CAAkB,IAAlB,EAAwB,MAAxB,CAAT;AACD,OAFD,MAEO;AACL,aAAK,SAAL;AACD;AACD,KATF,CASE,OAAO,GAAP,EAAY;AACZ,WAAK,MAAL,CAAY,GAAZ;AACD;AACF,GAhBO;;AAiBV,SAAA,YAAA;AAAC,CA1BD,CAAiC,iBAAA,CAAA,eAAjC,CAAA","sourcesContent":["import { Observable, SubscribableOrPromise } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { TeardownLogic } from '../Subscription';\n\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @extends {Ignored}\n * @hide true\n */\nexport class IfObservable<T, R> extends Observable<T> {\n\n  static create<T, R>(condition: () => boolean | void,\n                      thenSource?: SubscribableOrPromise<T> | void,\n                      elseSource?: SubscribableOrPromise<R> | void): Observable<T|R> {\n    return new IfObservable(condition, thenSource, elseSource);\n  }\n\n  constructor(private condition: () => boolean | void,\n              private thenSource?: SubscribableOrPromise<T> | void,\n              private elseSource?: SubscribableOrPromise<R> | void) {\n    super();\n  }\n\n  /** @deprecated internal use only */ _subscribe(subscriber: Subscriber<T|R>): TeardownLogic {\n    const { condition, thenSource, elseSource } = this;\n\n    return new IfSubscriber(subscriber, condition, thenSource, elseSource);\n  }\n}\n\nclass IfSubscriber<T, R> extends OuterSubscriber<T, T> {\n  constructor(destination: Subscriber<T>,\n              private condition: () => boolean | void,\n              private thenSource?: SubscribableOrPromise<T> | void,\n              private elseSource?: SubscribableOrPromise<R> | void) {\n    super(destination);\n    this.tryIf();\n  }\n\n  private tryIf(): void {\n    const { condition, thenSource, elseSource } = this;\n\n    let result: boolean;\n    try {\n      result = <boolean>condition();\n      const source = result ? thenSource : elseSource;\n\n      if (source) {\n        this.add(subscribeToResult(this, source));\n      } else {\n        this._complete();\n      }\n    } catch (err) {\n      this._error(err);\n    }\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}